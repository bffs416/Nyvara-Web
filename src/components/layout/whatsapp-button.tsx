'use client';

import React from 'react';
import { motion } from 'framer-motion';
import { siteConfig } from '@/lib/config';

const WhatsAppButton = () => {
  const phoneNumber = siteConfig.contact.phone;
  const message = siteConfig.contact.whatsappMessage;
  const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;

  const WhatsAppIcon = () => (
    <svg 
        width="32" 
        height="32" 
        viewBox="0 0 24 24" 
        fill="none" 
        xmlns="http://www.w3.org/2000/svg"
    >
        <path 
            d="M21.5 14.5C21.5 15.21 21.26 15.86 20.78 16.45C20.3 17.04 19.62 17.5 18.75 17.82C17.88 18.14 16.91 18.27 15.85 18.2C14.79 18.13 13.78 17.85 12.82 17.36C11.62 16.76 10.56 15.99 9.63 15.06C8.7 14.13 7.93 13.07 7.33 11.87C6.85 10.91 6.57 9.9 6.5 8.84C6.43 7.78 6.56 6.81 6.88 5.94C7.2 5.07 7.66 4.39 8.25 3.91C8.84 3.43 9.49 3.19 10.2 3.19H10.33C10.86 3.19 11.35 3.34 11.79 3.64C12.23 3.94 12.54 4.35 12.72 4.87L13.6 7.16C13.75 7.58 13.79 8.01 13.72 8.44C13.65 8.87 13.48 9.27 13.21 9.64L12.5 10.68C12.44 10.77 12.41 10.87 12.41 10.98C12.41 11.05 12.42 11.12 12.44 11.19C12.73 11.85 13.14 12.45 13.65 12.96C14.16 13.47 14.76 13.88 15.42 14.17C15.49 14.2 15.56 14.21 15.63 14.21C15.74 14.21 15.84 14.18 15.93 14.12L16.97 13.41C17.34 13.14 17.74 12.97 18.17 12.9C18.6 12.83 19.03 12.87 19.45 13.02L21.74 13.9C22.26 14.08 22.67 14.39 22.97 14.83C23.27 15.27 23.42 15.76 23.42 16.29V16.33C23.42 16.63 23.36 16.92 23.24 17.19C23.12 17.46 22.95 17.72 22.72 17.95C22.49 18.18 22.23 18.36 21.94 18.48C21.65 18.6 21.35 18.66 21.03 18.66C20.15 18.66 19.31 18.47 18.51 18.09C17.71 17.71 16.98 17.21 16.32 16.59C15.03 15.3 14.01 13.76 13.25 11.97C12.49 10.18 12.14 8.27 12.2 6.25C12.26 5.03 12.56 3.9 13.1 2.86C13.64 1.82 14.4 1.03 15.38 0.5C16.36 -0.04 17.47 -0.15 18.71 0.1C19.95 0.35 21.14 0.94 22.28 1.88C22.51 2.08 22.7 2.31 22.85 2.57C23 2.83 23.09 3.1 23.13 3.38L23.49 5.99C23.58 6.6 23.49 7.21 23.23 7.79C22.97 8.37 22.55 8.84 22.01 9.19L20.25 10.4C20.07 10.51 19.93 10.68 19.84 10.88C19.75 11.08 19.72 11.3 19.75 11.52C19.89 12.3 19.79 13.06 19.44 13.79C19.09 14.52 18.52 15.14 17.73 15.65C17.08 16.07 16.36 16.35 15.59 16.49C14.82 16.63 14.05 16.53 13.32 16.18L12.12 15.58C11.92 15.47 11.69 15.42 11.47 15.43C11.25 15.44 11.04 15.52 10.87 15.65L8.52 17.39C7.94 17.75 7.27 17.89 6.59 17.82C5.91 17.75 5.26 17.46 4.7 16.97L2.8 15.07C2.5 14.77 2.32 14.43 2.25 14.07C2.18 13.71 2.23 13.34 2.39 13L3.52 10.6C3.63 10.4 3.68 10.17 3.67 9.95C3.66 9.73 3.58 9.52 3.45 9.35L1.71 6.99C1.13 6.2 1.25 5.17 2 4.49L3.9 2.59C4.2 2.29 4.54 2.11 4.9 2.04C5.26 1.97 5.63 2.02 5.96 2.18L8.36 3.31C8.56 3.41 8.79 3.46 9.01 3.45C9.23 3.44 9.44 3.36 9.61 3.23L11.97 1.48C12.76 0.9 13.79 0.78 14.67 1.15Z" 
            fill="#FAFAFA"
        />
    </svg>
  );

  return (
    <motion.a
      href={whatsappUrl}
      target="_blank"
      rel="noopener noreferrer"
      className="fixed bottom-8 right-8 z-50 bg-[#25D366] text-white p-4 rounded-full shadow-lg flex items-center justify-center"
      aria-label="Contactar por WhatsApp"
      whileHover={{ scale: 1.1, boxShadow: "0px 10px 30px rgba(37, 211, 102, 0.4)" }}
      whileTap={{ scale: 0.9 }}
      animate={{
        scale: [1, 1.05, 1],
      }}
      transition={{
        duration: 2.5,
        repeat: Infinity,
        repeatType: 'loop',
        ease: 'easeInOut'
      }}
    >
      <WhatsAppIcon />
    </motion.a>
  );
};

export default WhatsAppButton;
